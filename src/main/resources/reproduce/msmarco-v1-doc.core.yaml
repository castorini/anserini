conditions:
  - name: bm25-doc-default
    display: "BM25 complete doc (k1=0.9, b=0.4)"
    display_html: "BM25 complete doc (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v1-doc -topics $topics -output $output -hits 1000 -bm25
    topics:
      - topic_key: msmarco-doc.dev
        eval_key: msmarco-doc.dev
        expected_scores:
          MRR@100: 0.2299
        metric_definitions:
          MRR@100: "-c -M 100 -m recip_rank"
      - topic_key: dl19-doc
        eval_key: dl19-doc
        expected_scores:
          AP@100: 0.2434
          nDCG@10: 0.5176
          R@1K: 0.6966
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
      - topic_key: dl20-doc
        eval_key: dl20-doc
        expected_scores:
          AP@100: 0.3793
          nDCG@10: 0.5286
          R@1K: 0.8085
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
  - name: bm25-d2q-t5-doc-default
    display: "BM25 complete doc with doc2query-T5 (k1=0.9, b=0.4)"
    display_html: "BM25 complete doc with doc2query-T5 (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v1-doc.d2q-t5 -topics $topics -output $output -hits 1000 -bm25
    topics:
      - topic_key: msmarco-doc.dev
        eval_key: msmarco-doc.dev
        expected_scores:
          MRR@100: 0.2880
        metric_definitions:
          MRR@100: "-c -M 100 -m recip_rank"
      - topic_key: dl19-doc
        eval_key: dl19-doc
        expected_scores:
          AP@100: 0.2700
          nDCG@10: 0.5968
          R@1K: 0.7190
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
      - topic_key: dl20-doc
        eval_key: dl20-doc
        expected_scores:
          AP@100: 0.4230
          nDCG@10: 0.5885
          R@1K: 0.8403
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
  - name: bm25-doc-segmented-default
    display: "BM25 segmented doc (k1=0.9, b=0.4)"
    display_html: "BM25 segmented doc (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v1-doc-segmented -topics $topics -output $output -bm25 -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000
    topics:
      - topic_key: msmarco-doc.dev
        eval_key: msmarco-doc.dev
        expected_scores:
          MRR@100: 0.2684
        metric_definitions:
          MRR@100: "-c -M 100 -m recip_rank"
      - topic_key: dl19-doc
        eval_key: dl19-doc
        expected_scores:
          AP@100: 0.2449
          nDCG@10: 0.5302
          R@1K: 0.6871
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
      - topic_key: dl20-doc
        eval_key: dl20-doc
        expected_scores:
          AP@100: 0.3586
          nDCG@10: 0.5281
          R@1K: 0.7755
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
  - name: bm25-d2q-t5-doc-segmented-default
    display: "BM25 segmented doc with doc2query-T5 (k1=0.9, b=0.4)"
    display_html: "BM25 segmented doc with doc2query-T5 (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v1-doc-segmented.d2q-t5 -topics $topics -output $output -bm25 -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000
    topics:
      - topic_key: msmarco-doc.dev
        eval_key: msmarco-doc.dev
        expected_scores:
          MRR@100: 0.3179
        metric_definitions:
          MRR@100: "-c -M 100 -m recip_rank"
      - topic_key: dl19-doc
        eval_key: dl19-doc
        expected_scores:
          AP@100: 0.2798
          nDCG@10: 0.6119
          R@1K: 0.7165
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
      - topic_key: dl20-doc
        eval_key: dl20-doc
        expected_scores:
          AP@100: 0.4150
          nDCG@10: 0.5957
          R@1K: 0.8046
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
  - name: unicoil.onnx
    display: "uniCOIL (with doc2query-T5): ONNX"
    display_html: "uniCOIL (with doc2query-T5): ONNX"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v1-doc-segmented.unicoil -topics $topics -output $output -impact -pretokenized -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000 -encoder UniCoil
    topics:
      - topic_key: msmarco-doc.dev
        eval_key: msmarco-doc.dev
        expected_scores:
          MRR@100: 0.3531
        metric_definitions:
          MRR@100: "-c -M 100 -m recip_rank"
      - topic_key: dl19-doc
        eval_key: dl19-doc
        expected_scores:
          AP@100: 0.2789
          nDCG@10: 0.6396
          R@1K: 0.6652
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
      - topic_key: dl20
        eval_key: dl20-doc
        expected_scores:
          AP@100: 0.3882
          nDCG@10: 0.6033
          R@1K: 0.7869
        metric_definitions:
          AP@100: "-c -M 100 -m map"
          nDCG@10: "-c -m ndcg_cut.10"
          R@1K: "-c -m recall.1000"
