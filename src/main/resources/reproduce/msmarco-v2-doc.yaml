conditions:
  - name: bm25-doc-default
    display: "BM25 complete doc (k1=0.9, b=0.4)"
    display_html: "BM25 (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc -topics $topics -output $output -hits 1000 -bm25
    topics:
      - topic_key: msmarco-v2-doc.dev
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.1572
      - topic_key: msmarco-v2-doc.dev2
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.1659
      - topic_key: dl21
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2126
            MRR@100: 0.8367
            nDCG@10: 0.5116
            R@100: 0.3195
            R@1K: 0.6739
      - topic_key: dl22
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.0801
            MRR@100: 0.6514
            nDCG@10: 0.2993
            R@100: 0.1756
            R@1K: 0.4107
      - topic_key: dl23
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1046
            MRR@100: 0.5669
            nDCG@10: 0.2946
            R@100: 0.2422
            R@1K: 0.5262
  - name: bm25-d2q-t5-doc-default
    display: "BM25 completed doc with doc2query-T5 (k1=0.9, b=0.4)"
    display_html: "BM25 with doc2query-T5 (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc.d2q-t5 -topics $topics -output $output -hits 1000 -bm25
    topics:
      - topic_key: msmarco-v2-doc.dev
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.2011
      - topic_key: msmarco-v2-doc.dev2
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.2012
      - topic_key: dl21
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2387
            MRR@100: 0.8866
            nDCG@10: 0.5792
            R@100: 0.3443
            R@1K: 0.7066
      - topic_key: dl22
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.0977
            MRR@100: 0.6666
            nDCG@10: 0.3539
            R@100: 0.2041
            R@1K: 0.4301
      - topic_key: dl23
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1273
            MRR@100: 0.6183
            nDCG@10: 0.3511
            R@100: 0.2773
            R@1K: 0.5549
  - name: bm25-doc-segmented-default
    display: "BM25 segmented doc (k1=0.9, b=0.4)"
    display_html: "BM25 segmented (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc-segmented -topics $topics -output $output -bm25 -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000
    topics:
      - topic_key: msmarco-v2-doc.dev
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.1896
      - topic_key: msmarco-v2-doc.dev2
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.1930
      - topic_key: dl21
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2436
            MRR@100: 0.8937
            nDCG@10: 0.5776
            R@100: 0.3478
            R@1K: 0.6930
      - topic_key: dl22
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.1036
            MRR@100: 0.7163
            nDCG@10: 0.3618
            R@100: 0.2192
            R@1K: 0.4664
      - topic_key: dl23
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1341
            MRR@100: 0.6477
            nDCG@10: 0.3405
            R@100: 0.2884
            R@1K: 0.5662
  - name: bm25-d2q-t5-doc-segmented-default
    display: "BM25 segmented doc with doc2query-T5 (k1=0.9, b=0.4)"
    display_html: "BM25 segmented with doc2query-T5 (<i>k<sub><small>1</small></sub></i>=0.9, <i>b</i>=0.4)"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc-segmented.d2q-t5 -topics $topics -output $output -bm25 -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000
    topics:
      - topic_key: msmarco-v2-doc.dev
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.2226
      - topic_key: msmarco-v2-doc.dev2
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.2234
      - topic_key: dl21
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2683
            MRR@100: 0.9454
            nDCG@10: 0.6289
            R@100: 0.3656
            R@1K: 0.7202
      - topic_key: dl22
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.1203
            MRR@100: 0.7367
            nDCG@10: 0.3975
            R@100: 0.2441
            R@1K: 0.4984
      - topic_key: dl23
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1460
            MRR@100: 0.7029
            nDCG@10: 0.3612
            R@100: 0.3078
            R@1K: 0.5967
  - name: unicoil-noexp.cached
    display: "uniCOIL (noexp): cached queries"
    display_html: "uniCOIL (noexp): cached queries"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc-segmented.unicoil-noexp-0shot -topics $topics -output $output -parallelism 16 -impact -pretokenized -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000
    topics:
      - topic_key: msmarco-v2-doc.dev.unicoil-noexp.0shot
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.2231
      - topic_key: msmarco-v2-doc.dev2.unicoil-noexp.0shot
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.2314
      - topic_key: dl21.unicoil-noexp.0shot
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2587
            MRR@100: 0.9282
            nDCG@10: 0.6495
            R@100: 0.3563
            R@1K: 0.6787
      - topic_key: dl22.unicoil-noexp.0shot
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.1180
            MRR@100: 0.7785
            nDCG@10: 0.4165
            R@100: 0.2335
            R@1K: 0.4779
      - topic_key: dl23.unicoil-noexp.0shot
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1413
            MRR@100: 0.7712
            nDCG@10: 0.3898
            R@100: 0.2949
            R@1K: 0.5462
  - name: unicoil.cached
    display: "uniCOIL (with doc2query-T5): cached queries"
    display_html: "uniCOIL (with doc2query-T5): cached queries"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc-segmented.unicoil-0shot -topics $topics -output $output -impact -pretokenized -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000
    topics:
      - topic_key: msmarco-v2-doc.dev.unicoil.0shot
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.2419
      - topic_key: msmarco-v2-doc.dev2.unicoil.0shot
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.2445
      - topic_key: dl21.unicoil.0shot
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2718
            MRR@100: 0.9684
            nDCG@10: 0.6783
            R@100: 0.3700
            R@1K: 0.7069
      - topic_key: dl22.unicoil.0shot
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.1400
            MRR@100: 0.8170
            nDCG@10: 0.4451
            R@100: 0.2656
            R@1K: 0.5235
      - topic_key: dl23.unicoil.0shot
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1554
            MRR@100: 0.7793
            nDCG@10: 0.4149
            R@100: 0.3101
            R@1K: 0.5753
  - name: unicoil.onnx
    display: "uniCOIL (with doc2query-T5): ONNX"
    display_html: "uniCOIL (with doc2query-T5): ONNX"
    display_row: ""
    command: java -cp $fatjar --add-modules jdk.incubator.vector io.anserini.search.SearchCollection -threads $threads -index msmarco-v2-doc-segmented.unicoil-0shot -topics $topics -output $output -impact -pretokenized -hits 10000 -selectMaxPassage -selectMaxPassage.delimiter \# -selectMaxPassage.hits 1000 -encoder UniCoil
    topics:
      - topic_key: msmarco-v2-doc.dev
        eval_key: msmarco-v2-doc.dev
        scores:
          - MRR@100: 0.2419
      - topic_key: msmarco-v2-doc.dev2
        eval_key: msmarco-v2-doc.dev2
        scores:
          - MRR@100: 0.2445
      - topic_key: dl21
        eval_key: dl21-doc
        scores:
          - MAP@100: 0.2718
            MRR@100: 0.9684
            nDCG@10: 0.6783
            R@100: 0.3700
            R@1K: 0.7069
      - topic_key: dl22
        eval_key: dl22-doc
        scores:
          - MAP@100: 0.1400
            MRR@100: 0.8170
            nDCG@10: 0.4451
            R@100: 0.2656
            R@1K: 0.5235
      - topic_key: dl23
        eval_key: dl23-doc
        scores:
          - MAP@100: 0.1554
            MRR@100: 0.7793
            nDCG@10: 0.4150
            R@100: 0.3101
            R@1K: 0.5753
